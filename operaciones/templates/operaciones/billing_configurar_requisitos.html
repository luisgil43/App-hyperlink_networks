{# templates/operaciones/billing_configurar_requisitos.html #}
{% extends "dashboard_admin/base.html" %}
{% block title %}Configure Photo Requirements{% endblock %}
{% block dashboard_content %}
<div class="max-w-6xl mx-auto bg-white p-6 rounded-2xl shadow mt-6">
  <h1 class="text-2xl font-bold mb-4">ðŸ“‹ Photo Requirements â€” Billing #{{ sesion.id }}</h1>
  <form method="post" class="space-y-8">
    {% csrf_token %}
    {% for a in asignaciones %}
      <div class="border rounded-2xl p-4">
        <div class="font-semibold mb-2">{{ a.tecnico.get_full_name|default:a.tecnico.username }}</div>
        <div id="list-{{ a.tecnico_id }}" class="space-y-3"></div>
        <button type="button" class="mt-2 bg-blue-600 text-white px-3 py-1 rounded" onclick="addReq({{ a.tecnico_id }})">+ Add Requirement</button>
      </div>
    {% endfor %}
    <button class="bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded">Save</button>
  </form>
</div>
<script>
function addReq(tid){
  const list = document.getElementById('list-'+tid);
  const idx = list.children.length;
  const wrap = document.createElement('div');
  wrap.className = "grid grid-cols-12 gap-2";
  wrap.innerHTML = `
    <input name="t${tid}_titulo[]" class="col-span-3 border rounded p-2" placeholder="Title" required>
    <input name="t${tid}_desc[]" class="col-span-6 border rounded p-2" placeholder="Description (optional)">
    <input name="t${tid}_ord[]" class="col-span-1 border rounded p-2" type="number" value="${idx}">
    <label class="col-span-2 flex items-center gap-2"><input type="checkbox" name="t${tid}_obl[]" value="1" checked> Required</label>
  `;
  list.appendChild(wrap);
}
</script>
{% endblock %}
